/*!
 * 
 * blue-perform-storage.js 1.0.5
 * (c) 2016-2024 Blue
 * Released under the MIT License.
 * https://github.com/azhanging/blue-perform-storage
 * time:Mon, 26 Feb 2024 06:21:24 GMT
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BluePerformStorage=t():e.BluePerformStorage=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="./static",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n=r(1),o=r(3);function a(e){var t=e.key,r=i.call(this,{key:t,prefixName:this.prefixName});if(n.default.hasKey(r)){var o=this.getExpireTime({key:t});o&&o<+new Date&&function(e){var t=e.key;this.removeExpireTimeStorage(e),this.removeStorage({key:t})}.call(this,{key:t})}}function i(e){var t=e.key,r=e.prefixName,n=void 0===r?"":r,o=""+t+this.expireTimeName;return n?u.call(this,o):o}function u(e){return""+(Object(o.hook)(null,this.prefixName)||"")+e}function f(e){e.key=u.call(this,e.key)}var c=function(){function e(e){void 0===e&&(e={}),this.keys=[],this.options=e||{},this.hooks=e.hooks||{},this.prefixName=e.prefixName||"",this.expireTimeName=e.expireTimeName||"ExpireTime",this.keys=e.keys||[],function(){var e=this;this.keys.forEach(function(t){var r,n=0;"string"==typeof t?r=t:(r=t.key,n=t.expire),a.call(e,{key:r}),e.generate({key:r,expire:n})})}.call(this)}return e.prototype.setStorage=function(e){var t=e.key;return Object(o.hook)(this,this.hooks.set,[{key:t}]),function(e){var t=e.key,r=e.expire;r&&this.setStorage({key:i.call(this,{key:t}),data:+new Date+r})}.call(this,e),f.call(this,e),n.default.setStorage(e)},e.prototype.getStorage=function(e){var t=e.key;a.call(this,{key:t}),f.call(this,e);var r=n.default.getStorage(e);return Object(o.hook)(this,this.hooks.get,[{key:t,data:r}]),r},e.prototype.removeStorage=function(e){var t=e.key;return f.call(this,e),Object(o.hook)(this,this.hooks.remove,[{key:t}]),n.default.removeStorage(e)},e.prototype.getExpireTime=function(e){var t=e.key;return this.getStorage({key:i.call(this,{key:t})})||0},e.prototype.removeExpireTimeStorage=function(e){var t=e.key;this.removeStorage({key:i.call(this,{key:t})})},e.prototype.generate=function(e){var t=e.key;(void 0===t?"":t)&&function(e){var t,r=this,n=e.key,o=e.expire,a=void 0===o?0:o,i=function(e){return e.split("_").map(function(e){return e[0].toUpperCase()+e.substring(1,e.length)}).join("")}(n);Object.defineProperties(this,((t={})["set"+i]={value:function(e){return r.setStorage({key:n,data:e,expire:a})},writable:!1},t["get"+i]={value:function(){return r.getStorage({key:n})},writable:!1},t["remove"+i]={value:function(){return r.removeStorage({key:n})},writable:!1},t))}.call(this,e)},e}();t.default=c},function(e,t,r){"use strict";r.r(t);var n=r(2);function o(e){var t=e.platform,r=e.platformName,o=[n.PLATFORM_NAME.ALIPAY,n.PLATFORM_NAME.BAIDU,n.PLATFORM_NAME.DINGDING].includes(r),a=t.setStorageSync,i=t.getStorageSync,u=t.removeStorageSync;return{setStorage:function(e){var t=e.key,r=e.data;o?a({key:t,data:r}):a(t,r)},getStorage:function(e){var t=e.key;return o?i({key:t}).data:i(t)},removeStorage:function(e){var t=e.key;return u(o?{key:t}:t)},hasKey:function(e){return function(e,t){return!!e.getStorageInfoSync().keys.includes(t)}(t,e)}}}var a,i,u=Object(n.uniPlatform)()?o({platform:uni,platformName:n.PLATFORM_NAME.UNI}):Object(n.aliPayPlatform)()?o({platform:my,platformName:n.PLATFORM_NAME.ALIPAY}):Object(n.dingDingPlatform)()?o({platform:dd,platformName:n.PLATFORM_NAME.DINGDING}):Object(n.weChatPlatform)()?o({platform:wx,platformName:n.PLATFORM_NAME.WECHAT}):Object(n.baiduPlatform)()?o({platform:swan,platformName:n.PLATFORM_NAME.BAIDU}):Object(n.byteDancePlatform)()?o({platform:tt,platformName:n.PLATFORM_NAME.BYTEDANCE}):window&&window.localStorage?(a=window.localStorage,i=["object","number","boolean","undefined"],{setStorage:function(e){var t=e.key,r=e.data,n=typeof r;if("string"===n)a.setItem(t,r);else{var o=i.includes(n)?{type:n,data:r}:{type:n};a.setItem(t,JSON.stringify(o))}},getStorage:function(e){var t=e.key;try{var r=JSON.parse(a.getItem(t)),n=r.data;return"undefined"===r.type?"":void 0!==n?n:n.toString()}catch(e){return a.getItem(t)}},removeStorage:function(e){var t=e.key;return a.removeItem(t)},hasKey:function(e){return e in a}}):(console.warn("当前环境不支持"),null);t.default=u},function(e,t,r){"use strict";var n;function o(e){return!!(e&&e.setStorageSync&&e.getStorageSync)}function a(){try{return o(wx)}catch(e){return!1}}function i(){try{return o(uni)}catch(e){return!1}}function u(){try{return o(my)}catch(e){return!1}}function f(){try{return o(swan)}catch(e){return!1}}function c(){try{return o(tt)}catch(e){return!1}}function l(){try{return o(dd)}catch(e){return!1}}r.r(t),r.d(t,"PLATFORM_NAME",function(){return n}),r.d(t,"weChatPlatform",function(){return a}),r.d(t,"uniPlatform",function(){return i}),r.d(t,"aliPayPlatform",function(){return u}),r.d(t,"baiduPlatform",function(){return f}),r.d(t,"byteDancePlatform",function(){return c}),r.d(t,"dingDingPlatform",function(){return l}),function(e){e.WECHAT="wx",e.UNI="uni",e.ALIPAY="my",e.BAIDU="swan",e.BYTEDANCE="tt",e.DINGDING="dd"}(n||(n={}))},function(e,t,r){"use strict";function n(e,t,r){return void 0===r&&(r=[]),"function"==typeof t?t.apply(e,r):t}r.r(t),r.d(t,"hook",function(){return n})}]).default});
//# sourceMappingURL=blue-perform-storage.min.js.map