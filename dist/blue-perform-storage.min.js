/*!
 * 
 * blue-perform-storage.js 1.0.0
 * (c) 2016-2022 Blue
 * Released under the MIT License.
 * https://github.com/azhanging/blue-perform-storage
 * time:Sun, 07 Aug 2022 10:06:43 GMT
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BluePerformStorage=t():e.BluePerformStorage=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="./static",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r){return void 0===r&&(r=[]),"function"==typeof t?t.apply(e,r):t}function o(e,t){return!!e.getStorageInfoSync().keys[t]}r.r(t);var i,a,u=function(){try{return wx}catch(e){return!1}}()?{setStorage:function(e){var t=e.key,r=e.data;wx.setStorageSync(t,r)},getStorage:function(e){var t=e.key;return wx.getStorageSync(t)},removeStorage:function(e){var t=e.key;wx.removeStorageSync(t)},hasKey:function(e){return o(wx,e)}}:function(){try{return my}catch(e){return!1}}()||function(){try{return uni}catch(e){return!1}}()?{setStorage:(a=my||uni).setStorageSync,getStorage:a.getStorageSync,removeStorage:a.removeStorageSync,hasKey:function(e){return o(a,e)}}:window&&window.localStorage?(i=window.localStorage,{setStorage:function(e){var t=e.key,r=e.data;try{i.setItem(t,JSON.stringify(r))}catch(e){return i.setItem(t,r)}},getStorage:function(e){var t=e.key;try{return JSON.parse(i.getItem(t))}catch(e){return i.getItem(t)}},removeStorage:function(e){var t=e.key;return i.removeItem(t)},hasKey:function(e){return e in i}}):(console.warn("当前环境不支持"),null);function c(e){var t=e.key,r=s.call(this,{key:t,prefixName:this.prefixName});if(u.hasKey(r)){var n=this.getExpireTime({key:t});n&&n<+new Date&&function(e){var t=e.key;this.removeExpireTimeStorage(e),this.removeStorage({key:t})}.call(this,{key:t})}}function s(e){var t=e.key,r=e.prefixName,n=void 0===r?"":r,o=""+t+this.expireTimeName;return n?f.call(this,o):o}function f(e){return""+(n(null,this.prefixName)||"")+e}function y(e){e.key=f.call(this,e.key)}var l=function(){function e(e){void 0===e&&(e={}),this.keys=[],this.options=e||{},this.hooks=e.hooks||{},this.prefixName=e.prefixName||"",this.expireTimeName=e.expireTimeName||"ExpireTime",this.keys=e.keys||[],function(){var e=this;this.keys.forEach(function(t){var r,n=0;"string"==typeof t?r=t:(r=t.key,n=t.expire),c.call(e,{key:r}),e.generate({key:r,expire:n})})}.call(this)}return e.prototype.setStorage=function(e){var t=e.key;return n(this,this.hooks.set,[{key:t}]),function(e){var t=e.key,r=e.expire;r&&this.setStorage({key:s.call(this,{key:t}),data:+new Date+r})}.call(this,e),y.call(this,e),u.setStorage(e)},e.prototype.getStorage=function(e){var t=e.key;c.call(this,{key:t}),y.call(this,e);var r=u.getStorage(e);return n(this,this.hooks.get,[{key:t,data:r}]),r},e.prototype.removeStorage=function(e){var t=e.key;return y.call(this,e),n(this,this.hooks.remove,[{key:t}]),u.removeStorage(e)},e.prototype.getExpireTime=function(e){var t=e.key;return this.getStorage({key:s.call(this,{key:t})})||0},e.prototype.removeExpireTimeStorage=function(e){var t=e.key;this.removeStorage({key:s.call(this,{key:t})})},e.prototype.generate=function(e){var t=e.key;(void 0===t?"":t)&&function(e){var t,r=this,n=e.key,o=e.expire,i=void 0===o?0:o,a=function(e){return""+e.toLocaleUpperCase()[0]+e.substring(1,e.length)}(n);Object.defineProperties(this,((t={})["set"+a]={value:function(e){return r.setStorage({key:n,data:e,expire:i})},writable:!1},t["get"+a]={value:function(){return r.getStorage({key:n})},writable:!1},t["remove"+a]={value:function(){return r.removeStorage({key:n})},writable:!1},t))}.call(this,e)},e}();t.default=l}]).default});
//# sourceMappingURL=blue-perform-storage.min.js.map